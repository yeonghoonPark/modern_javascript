"use strict";

/**
 * 24. í´ë¡œì €(closure)
 *
 * í´ë¡œì €ëŠ” ìžë°”ìŠ¤í¬ë¦½íŠ¸ ê³ ìœ ì˜ ê°œë…ì´ ì•„ë‹ˆë‹¤.
 * í•¨ìˆ˜ë¥¼ ì¼ê¸‰ ê°ì²´ë¡œ ì·¨ê¸‰í•˜ëŠ” í•¨ìˆ˜í˜• í”„ë¡œê·¸ëž˜ë° ì–¸ì–´(Haskell, Lisp, Scala, and etc)ì—ì„œ ì‚¬ìš©ë˜ëŠ” íŠ¹ì„±ì´ë‹¤.
 * MDNì—ì„œëŠ” í´ë¡œì €ì— ëŒ€í•´ ë‹¤ìŒê³¼ ê°™ì´ ì •ì˜í•˜ê³  ìžˆë‹¤.
 *
 * "A closure is the combination of a function and the lexical environment within which that function was declared."
 * "í´ë¡œì €ëŠ” í•¨ìˆ˜ì™€ ê·¸ í•¨ìˆ˜ê°€ ì„ ì–¸ëœ ë ‰ì‹œì»¬ í™˜ê²½ê³¼ì˜ ì¡°í•©ì´ë‹¤."
 *
 * í´ë¡œì €ëŠ” ë ‰ì‹œì»¬ ìŠ¤ì½”í”„ì— ë”°ë¼ ìƒìœ„ ìŠ¤ì½”í”„ì—ì„œ í•˜ìœ„ ìŠ¤ì½”í”„ë¥¼ ì°¸ì¡°í•  ìˆ˜ ì—†ëŠ” ë¬¸ì œë¥¼ í•´ê²°í•¨ê³¼ ë™ì‹œì— ìƒìœ„ ìŠ¤ì½”í”„ì—ì„œ í•˜ìœ„ ìŠ¤ì½”í”„ì˜ ì‹ë³„ìžë¥¼ ê³„ì† ì°¸ì¡°í•  ìˆ˜ ìžˆëŠ” ê°œë…ì´ë‹¤.
 * ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ê°€ ìƒì„±ë  ë•Œ í™˜ê²½ ë ˆì½”ë“œë„ ìƒì„±ë˜ì§€ë§Œ, ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ê°€ ì¢…ë£Œëœë‹¤ê³  í•˜ë”ë¼ë„ í™˜ê²½ ë ˆì½”ë“œëŠ” ë°”ë¡œ ì‚¬ë¼ì§€ì§€ ì•ŠëŠ”ë‹¤ëŠ” ì ì„ ì´ìš©í•œ ê²ƒì´ë©°,
 * ì´ëŠ” ì •ë³´ ì€ë‹‰, ìƒíƒœì˜ ì§€ì†ì„± ìœ ì§€, ìº¡ìŠí™”, ë¹„ë™ê¸° ì²˜ë¦¬, ì½”ë“œ ëª¨ë“ˆí™” ë“±ì˜ ìž¥ì ìœ¼ë¡œ ì´ì–´ì§„ë‹¤.
 *
 *
 * ðŸ“š. ì¼ê¸‰ ê°ì²´(`first-class object`)ëž€?
 *  1. ë¬´ëª…ìœ¼ë¡œ ìƒì„±í•  ìˆ˜ ìžˆë‹¤. ì¦‰, ëŸ°-íƒ€ìž„ì— ìƒì„±í•  ìˆ˜ ìžˆë‹¤.
 *  2. ë³€ìˆ˜ë‚˜ ìžë£Œêµ¬ì¡°(ê°ì²´, ë°°ì—´)ì— ì €ìž¥í•  ìˆ˜ ìžˆë‹¤.
 *  3. í•¨ìˆ˜ì˜ ì¸ìžì™€ ë°˜í™˜ê°’ìœ¼ë¡œ ì‚¬ìš©í•  ìˆ˜ ìžˆë‹¤. ì¦‰ ê°’ìœ¼ë¡œ ì‚¬ìš©í•  ìˆ˜ ìžˆë‹¤.
 * ìœ„ì˜ ì¡°ê±´ì„ ë§Œì¡±í•˜ëŠ” ê°ì²´ë¥¼ ì¼ê¸‰ ê°ì²´ë¼ í•œë‹¤.
 *
 * ðŸ“š. ë ‰ì‹œì»¬ ìŠ¤ì½”í”„(`lexical scope`)ëž€?
 *  - í•¨ìˆ˜ê°€ ì–´ë””ì„œ ì •ì˜ë˜ì—ˆëƒì— ë”°ë¼ ìƒìœ„ ìŠ¤ì½”í”„ë¥¼ ì°¸ì¡°í•˜ëŠ” ë°©ì‹ì´ë‹¤.
 *   (ë°˜ëŒ€ ê°œë…ì€ ë‹¤ì´ë‚˜ë¯¹ ìŠ¤ì½”í”„(`dynamic scope`)ë¼ í•˜ë©° í•¨ìˆ˜ê°€ ì‹¤í–‰ë  ë•Œ í˜¸ì¶œ ìœ„ì¹˜ì— ë”°ë¼ ìƒìœ„ ìŠ¤ì½”í”„ë¥¼ ì°¸ì¡°í•˜ëŠ” ë°©ì‹ì´ë‹¤.)
 *
 */

// ðŸ‘‰ ì˜ˆë¬¸
{
  // `inner` í•¨ìˆ˜ëŠ” `outer` í•¨ìˆ˜ì˜ ì¤‘ì²© í•¨ìˆ˜ë¡œ ì •ì˜ë˜ì—ˆìœ¼ë©°,
  // `outer` í•¨ìˆ˜ëŠ” `inner` í•¨ìˆ˜ì˜ ìƒìœ„ ìŠ¤ì½”í”¼ì´ë‹¤.
  // `inner` í•¨ìˆ˜ëŠ” `outer` í•¨ìˆ˜ì˜ ì‹ë³„ìž `x`ë¥¼ ì°¸ì¡°í•  ìˆ˜ ìžˆì§€ë§Œ,
  // ë°˜ëŒ€ë¡œ `outer` í•¨ìˆ˜ëŠ” `inner` í•¨ìˆ˜ ë‚´ë¶€ì—ì„œ ì„ ì–¸ëœ ì‹ë³„ìž `y`ë¥¼ ì°¸ì¡°í•  ìˆ˜ ì—†ë‹¤.
  // ì´ëŠ” ìžë°”ìŠ¤í¬ë¦½íŠ¸ê°€ ë ‰ì‹œì»¬ ìŠ¤ì½”í”„ë¥¼ ë”°ë¥´ëŠ” í”„ë¡œê·¸ëž˜ë° ì–¸ì–´ì´ê¸° ë•Œë¬¸ì— ë°œìƒí•˜ëŠ” í˜„ìƒì´ë‹¤.

  const outer = () => {
    const x = 10;
    console.log(y); // ReferenceError: y is not defined

    const inner = () => {
      const y = 10;
      console.log(x); // 10
    };

    inner();
  };

  outer();
}
