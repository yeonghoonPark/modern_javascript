"use strict";

/**
 * 24. í´ë¡œì €(closure)
 *
 * í´ë¡œì €ëŠ” ìë°”ìŠ¤í¬ë¦½íŠ¸ ê³ ìœ ì˜ ê°œë…ì´ ì•„ë‹ˆë‹¤.
 * í•¨ìˆ˜ë¥¼ ì¼ê¸‰ ê°ì²´ë¡œ ì·¨ê¸‰í•˜ëŠ” í•¨ìˆ˜í˜• í”„ë¡œê·¸ë˜ë° ì–¸ì–´(Haskell, Lisp, Scala, and etc)ì—ì„œ ì‚¬ìš©ë˜ëŠ” íŠ¹ì„±ì´ë‹¤.
 * MDNì—ì„œëŠ” í´ë¡œì €ì— ëŒ€í•´ ë‹¤ìŒê³¼ ê°™ì´ ì •ì˜í•˜ê³  ìˆë‹¤.
 *
 * "A closure is the combination of a function and the lexical environment within which that function was declared."
 * "í´ë¡œì €ëŠ” í•¨ìˆ˜ì™€ ê·¸ í•¨ìˆ˜ê°€ ì„ ì–¸ëœ ë ‰ì‹œì»¬ í™˜ê²½ê³¼ì˜ ì¡°í•©ì´ë‹¤."
 *
 * í´ë¡œì €ëŠ” ë ‰ì‹œì»¬ ìŠ¤ì½”í”„ì— ë”°ë¼ ìƒìœ„ ìŠ¤ì½”í”„ì—ì„œ í•˜ìœ„ ìŠ¤ì½”í”„ë¥¼ ì°¸ì¡°í•  ìˆ˜ ì—†ëŠ” ë¬¸ì œë¥¼ í•´ê²°í•¨ê³¼ ë™ì‹œì— ìƒìœ„ ìŠ¤ì½”í”„ì—ì„œ í•˜ìœ„ ìŠ¤ì½”í”„ì˜ ì‹ë³„ìë¥¼ ê³„ì† ì°¸ì¡°í•  ìˆ˜ ìˆëŠ” ê°œë…ì´ë‹¤.
 * ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ê°€ ìƒì„±ë  ë•Œ í™˜ê²½ ë ˆì½”ë“œë„ ìƒì„±ë˜ë©°, ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ê°€ ì¢…ë£Œëœë‹¤ê³  í•˜ë”ë¼ë„ í™˜ê²½ ë ˆì½”ë“œëŠ” ë°”ë¡œ ì‚¬ë¼ì§€ì§€ ì•ŠëŠ”ë‹¤ëŠ” ì ì„ ì´ìš©í•œ ê²ƒì´ë©°,
 * ì´ëŠ” ì •ë³´ ì€ë‹‰, ìƒíƒœì˜ ì§€ì†ì„± ìœ ì§€, ìº¡ìŠí™”, ë¹„ë™ê¸° ì²˜ë¦¬, ì½”ë“œ ëª¨ë“ˆí™” ë“±ì˜ ì¥ì ìœ¼ë¡œ ì´ì–´ì§„ë‹¤.
 *
 *
 * ğŸ“š. ì¼ê¸‰ ê°ì²´(`first-class object`)ë€?
 *  1. ë¬´ëª…ìœ¼ë¡œ ìƒì„±í•  ìˆ˜ ìˆë‹¤. ì¦‰, ëŸ°-íƒ€ì„ì— ìƒì„±í•  ìˆ˜ ìˆë‹¤.
 *  2. ë³€ìˆ˜ë‚˜ ìë£Œêµ¬ì¡°(ê°ì²´, ë°°ì—´)ì— ì €ì¥í•  ìˆ˜ ìˆë‹¤.
 *  3. í•¨ìˆ˜ì˜ ì¸ìì™€ ë°˜í™˜ê°’ìœ¼ë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤. ì¦‰ ê°’ìœ¼ë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.
 *  ìœ„ì˜ ì¡°ê±´ì„ ë§Œì¡±í•˜ëŠ” ê°ì²´ë¥¼ ì¼ê¸‰ ê°ì²´ë¼ í•œë‹¤.
 *
 * ğŸ“š. ë ‰ì‹œì»¬ ìŠ¤ì½”í”„(`lexical scope`)ë€?
 *  - í•¨ìˆ˜ê°€ ì–´ë””ì„œ ì •ì˜ë˜ì—ˆëƒì— ë”°ë¼ ìƒìœ„ ìŠ¤ì½”í”„ë¥¼ ì°¸ì¡°í•˜ëŠ” ë°©ì‹ì´ë‹¤.
 *   (ë°˜ëŒ€ ê°œë…ì€ ë‹¤ì´ë‚˜ë¯¹ ìŠ¤ì½”í”„(`dynamic scope`)ë¼ í•˜ë©° í•¨ìˆ˜ê°€ ì‹¤í–‰ë  ë•Œ í˜¸ì¶œ ìœ„ì¹˜ì— ë”°ë¼ ìƒìœ„ ìŠ¤ì½”í”„ë¥¼ ì°¸ì¡°í•˜ëŠ” ë°©ì‹ì´ë‹¤.)
 *
 */

// ğŸ‘‰ ì˜ˆë¬¸
{
  // `inner` í•¨ìˆ˜ëŠ” `outer` í•¨ìˆ˜ì˜ ì¤‘ì²© í•¨ìˆ˜ë¡œ ì •ì˜ë˜ì—ˆìœ¼ë©°,
  // `outer` í•¨ìˆ˜ëŠ” `inner` í•¨ìˆ˜ì˜ ìƒìœ„ ìŠ¤ì½”í”¼ì´ë‹¤.
  // `inner` í•¨ìˆ˜ëŠ” `outer` í•¨ìˆ˜ì˜ ì‹ë³„ì `x`ë¥¼ ì°¸ì¡°í•  ìˆ˜ ìˆì§€ë§Œ,
  // ë°˜ëŒ€ë¡œ `outer` í•¨ìˆ˜ëŠ” `inner` í•¨ìˆ˜ ë‚´ë¶€ì—ì„œ ì„ ì–¸ëœ ì‹ë³„ì `y`ë¥¼ ì°¸ì¡°í•  ìˆ˜ ì—†ë‹¤.
  // ì´ëŠ” ìë°”ìŠ¤í¬ë¦½íŠ¸ê°€ ë ‰ì‹œì»¬ ìŠ¤ì½”í”„ë¥¼ ë”°ë¥´ëŠ” í”„ë¡œê·¸ë˜ë° ì–¸ì–´ì´ê¸° ë•Œë¬¸ì— ë°œìƒí•˜ëŠ” í˜„ìƒì´ë‹¤.

  const outer = () => {
    const x = 10;
    // console.log(y); // ReferenceError: y is not defined

    const inner = () => {
      const y = 10;
      console.log(x); // 10
    };

    inner();
  };

  outer();
}

/**
 * 24-1. ë ‰ì‹œì»¬ ìŠ¤ì½”í”„(Lexical scope)
 *
 * ë ‰ì‹œì»¬ ìŠ¤ì½”í”„ë€,
 * ğŸ”‘ í•¨ìˆ˜ë¥¼ ì–´ë””ì„œ í˜¸ì¶œí–ˆëŠ”ì§€ê°€ ì•„ë‹ˆë¼ í•¨ìˆ˜ë¥¼ ì–´ë””ì— ì •ì˜í–ˆëŠ”ì§€ì— ë”°ë¼ ìƒìœ„ ìŠ¤ì½”í”„ë¥¼ ê²°ì •í•˜ëŠ” ë°©ì‹ì„ ë§í•œë‹¤.
 *
 * ìë°”ìŠ¤í¬ë¦½íŠ¸ëŠ” ë ‰ì‹œì»¬ ìŠ¤ì½”í”„ë¥¼ ê°€ì§„ë‹¤.
 * ì†ŒìŠ¤ì½”ë“œì— ë”°ë¼ ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ê°€ ìƒì„±ë˜ë©´ ë³€ìˆ˜ë‚˜ í•¨ìˆ˜ì™€ ê°™ì€ ì‹ë³„ìë¥¼ ê´€ë¦¬í•˜ê¸° ìœ„í•œ ë ‰ì‹œì»¬ í™˜ê²½ì´ ìƒì„±ëœë‹¤.
 * ë ‰ì‹œì»¬ í™˜ê²½ì€ 2ê°€ì§€ ì»´í¬ë„ŒíŠ¸ë¡œ êµ¬ì„±ëœë‹¤.
 * ìƒì„±ëœ ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ì˜ ì‹ë³„ìë¥¼ ê´€ë¦¬í•˜ê¸° ìœ„í•œ "í™˜ê²½ ë ˆì½”ë“œ"ì™€
 * ìƒìœ„ ìŠ¤ì½”í”„ì˜ ì‹ë³„ìë¥¼ ì°¸ì¡°í•˜ê¸° ìœ„í•œ "ì™¸ë¶€ ë ‰ì‹œì»¬ í™˜ê²½ ì°¸ì¡°"ë¡œ êµ¬ì„±ëœë‹¤.
 * ì—¬ê¸°ì„œ ë§í•˜ëŠ” ìƒìœ„ ìŠ¤ì½”í”„ë¥¼ ê²°ì •í•˜ëŠ” ë°©ì‹ì— ëŒ€í•´ ë ‰ì‹œì»¬ ìŠ¤ì½”í”„ë¥¼ ë”°ë¥´ë©°, ì´ ê°œë…ì„ ë°˜ì˜í•˜ì—¬ ë ‰ì‹œì»¬ ìŠ¤ì½”í”„ë¥¼ ì •ì˜í•œë‹¤ë©´
 * "ì™¸ë¶€ ë ‰ì‹œì»¬ í™˜ê²½ì— ëŒ€í•œ ì°¸ì¡°"ì— ì €ì¥í•  ì°¸ì¡°ê°’,
 * ğŸ”‘ ì¦‰ ìƒìœ„ ìŠ¤ì½”í”„ì— ëŒ€í•œ ì°¸ì¡°ëŠ” í•¨ìˆ˜ ì •ì˜ê°€ í‰ê°€ë˜ëŠ” ì‹œì ì— í•¨ìˆ˜ê°€ ì •ì˜ëœ ìœ„ì¹˜ì— ì˜í•´ ê²°ì •ëœë‹¤.
 *
 * ì´ë¥¼ ë ‰ì‹œì»¬ ìŠ¤ì½”í”„ë¼ í•œë‹¤.
 *
 */

// ğŸ‘‰ ì˜ˆë¬¸

// ìë°”ìŠ¤í¬ë¦½íŠ¸ì—ì„œ ìƒìœ„ ìŠ¤ì½”í”„ëŠ” í•¨ìˆ˜ë¥¼ ì–´ë””ì„œ ì •ì˜í–ˆëŠëƒì— ë”°ë¼ ê²°ì •ëœë‹¤.
// `foo` í•¨ìˆ˜ì™€ `bar` í•¨ìˆ˜ëŠ” ì „ì—­ ì†ŒìŠ¤ì½”ë“œì—ì„œ ì •ì˜ë˜ë¯€ë¡œ, ë‘ í•¨ìˆ˜ì˜ ìƒìœ„ ìŠ¤ì½”í”„ëŠ” ì „ì—­ì´ë‹¤.
// `foo` í•¨ìˆ˜ ë‚´ë¶€ì—ì„œ `bar` í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ì˜€ì§€ë§Œ, í•¨ìˆ˜ì˜ í˜¸ì¶œ ìœ„ì¹˜ëŠ” ìƒìœ„ ìŠ¤ì½”í”„ë¥¼ ê²°ì •í•˜ëŠ”ë° ì•„ë¬´ëŸ° ì˜í–¥ë„ ì£¼ì§€ ëª»í•œë‹¤.
// ì¦‰, í•¨ìˆ˜ì˜ ìƒìœ„ ìŠ¤ì½”í”„ëŠ” í•¨ìˆ˜ë¥¼ ì •ì˜í•œ ìœ„ì¹˜ì— ì˜í•´ ì •ì ìœ¼ë¡œ ê²°ì •ë˜ê³  ë³€í•˜ì§€ ì•ŠëŠ”ë‹¤.

const x = 1;

function foo() {
  const x = 10;
  bar();
}

function bar() {
  console.log(x);
}

foo(); // 1
bar(); // 1

/**
 * 24-2. í•¨ìˆ˜ ê°ì²´ì˜ ë‚´ë¶€ ìŠ¬ë¡¯ [[Environment]]
 *
 * í•¨ìˆ˜ëŠ” ì •ì˜ëœ ìœ„ì¹˜(í™˜ê²½)ì™€ í˜¸ì¶œë˜ëŠ” ìœ„ì¹˜(í™˜ê²½)ê°€ ë‹¤ë¥¼ ìˆ˜ ìˆë‹¤.
 * ë ‰ì‹œì»¬ ìŠ¤ì½”í”„ê°€ ê°€ëŠ¥í•˜ê²Œ í•˜ë ¤ë©´ í•¨ìˆ˜ ìì‹ ì´ í˜¸ì¶œë˜ëŠ” ìœ„ì¹˜ì™€ ìƒê´€ì—†ì´ ìì‹ ì´ ì •ì˜ëœ ìœ„ì¹˜,
 * ìƒìœ„ ìŠ¤ì½”í”„(í•¨ìˆ˜ ì •ì˜ê°€ ìœ„ì¹˜í•˜ëŠ” ìŠ¤ì½”í”„ê°€ ë°”ë¡œ ìƒìœ„ ìŠ¤ì½”í”„ë‹¤)ë¥¼ ê¸°ì–µí•´ì•¼í•œë‹¤.
 * ğŸ”‘ í•¨ìˆ˜ëŠ” ìì‹ ì´ ì •ì˜ëœ ìœ„ì¹˜, ì¦‰ ìƒìœ„ ìŠ¤ì½”í”„ë¥¼ ê¸°ì–µí•˜ê¸° ìœ„í•´ [[Environment]]ì— ìì‹ ì´ ì •ì˜ëœ í™˜ê²½ì„ ì°¸ì¡°í•œë‹¤.
 * ë‹¤ì‹œ ë§í•´ [[Environment]]ì— ì°¸ì¡°ëœ ê°’ì€ "ì™¸ë¶€ ë ‰ì‹œì»¬ í™˜ê²½ ì°¸ì¡°"ë‹¤.
 *
 */

// ğŸ‘‰ ì˜ˆë¬¸
{
  const x = 1;

  // `bar` í•¨ìˆ˜ëŠ” [[Environment]] ë‚´ë¶€ ìŠ¬ë¡¯ì— ì˜ˆë¬¸ì˜ {} ìŠ¤ì½”í”„ì˜ í™˜ê²½ì„ ì°¸ì¡°í•œë‹¤.
  const bar = () => {
    console.log(x);
  };

  const foo = () => {
    const x = 10;

    // `bar` í•¨ìˆ˜ì˜ ìƒìœ„ ìŠ¤ì½”í”„ëŠ” `bar` í•¨ìˆ˜ê°€ ì •ì˜ëœ ê³³ì´ë‹¤.
    // ë”°ë¼ì„œ í•´ë‹¹ ì˜ˆë¬¸ì—ì„œëŠ” {} ë‚´ë¶€ë¥¼ ì˜ë¯¸í•œë‹¤.
    bar();
  };

  foo(); // 1
  bar(); // 1
}

/**
 * 24-3. í´ë¡œì €ì™€ ë ‰ì‹œì»¬ í™˜ê²½
 *
 */

// ğŸ‘‰ ì˜ˆë¬¸
{
  const x = 1;

  // 1.
  const outer = () => {
    const x = 10;

    const inner = () => {
      // 2.
      console.log(x);
    };

    return inner;
  };

  // 3. `outer` í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ë©´, `outer` í•¨ìˆ˜ëŠ” `inner` í•¨ìˆ˜ë¥¼ ë°˜í™˜í•˜ê³ , `outer` í•¨ìˆ˜ì˜ ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ëŠ” í˜¸ì¶œ ìŠ¤íƒì—ì„œ ì œê±°ëœë‹¤.
  const innerFunc = outer();

  // 4. ë°˜í™˜ëœ `inner` í•¨ìˆ˜
  innerFunc(); // 10

  // ğŸ”‘ ì´ë¯¸ ìƒëª… ì£¼ê¸°ê°€ ì¢…ë£Œí•œ `outer` ì™¸ë¶€ í•¨ìˆ˜ì˜ ì‹ë³„ìë¥¼ ì°¸ì¡°í•  ìˆ˜ ìˆë‹¤. ì´ëŸ¬í•œ ì¤‘ì²© í•¨ìˆ˜ë¥¼ í´ë¡œì €ë¼ í•œë‹¤.
  // `outer` í•¨ìˆ˜ì˜ ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ê°€ ì¢…ë£Œë˜ê³  í˜¸ì¶œ ìŠ¤íƒì—ì„œ ì œê±°ë˜ë”ë¼ë„,
  // í•¨ê»˜ ìƒì„±ëœ ë ‰ì‹œì»¬ í™˜ê²½ì€ ë°”ë¡œ ì†Œë©¸í•˜ì§€ ì•ŠëŠ”ë‹¤. ë˜í•œ ì–´ë”˜ê°€ì—ì„œ ì°¸ì¡°í•˜ê³  ìˆë‹¤ë©´ ì œê±°ë˜ì§€ ì•ŠëŠ”ë‹¤.
  // ìœ„ ì˜ˆë¬¸ì—ì„œ `inner` í•¨ìˆ˜ëŠ” `innerFunc` ë¼ëŠ” ì‹ë³„ìì— ì˜í•´ ì°¸ì¡°ë˜ê³  ìˆìœ¼ë¯€ë¡œ ê°€ë¹„ì§€ ì»¬ë ‰ì…˜ì˜ ëŒ€ìƒì´ ì•„ë‹ˆë‹¤.
  // ê°€ë¹„ì§€ ì»¬ë ‰í„°ëŠ” ëˆ„êµ°ê°€ê°€ ì°¸ì¡°í•˜ê³  ìˆëŠ” ë©”ëª¨ë¦¬ ê³µê°„ì„ í•¨ë¶€ë¡œ í•´ì œí•˜ì§€ ì•ŠëŠ”ë‹¤.
}

// ìë°”ìŠ¤í¬ë¦½íŠ¸ì˜ ëª¨ë“  í•¨ìˆ˜ëŠ” ìƒìœ„ ìŠ¤ì½”í”„ë¥¼ ê¸°ì–µí•˜ë¯€ë¡œ ì´ë¡ ì ìœ¼ë¡œ ëª¨ë“  í•¨ìˆ˜ëŠ” í´ë¡œì €ë‹¤.
// í•˜ì§€ë§Œ ì¼ë°˜ì ìœ¼ë¡œ ëª¨ë“  í•¨ìˆ˜ë¥¼ í´ë¡œì €ë¼ê³  í•˜ì§€ëŠ” ì•ŠëŠ”ë‹¤.

// ğŸ‘‰ ì˜ˆë¬¸
{
  function foo() {
    const x = 1;
    const y = 2;

    // ğŸ”‘ `bar` í•¨ìˆ˜ëŠ” ìƒìœ„ ìŠ¤ì½”í”„ì˜ ì‹ë³„ìë¥¼ ì°¸ì¡°í•˜ì§€ ì•Šì•„ í´ë¡œì €ë¼ í•˜ì§€ ì•ŠëŠ”ë‹¤.
    function bar() {
      const z = 3;

      // debugger;
      console.log(z);
    }

    return bar();
  }

  foo();
}

// ğŸ‘‰ ì˜ˆë¬¸
{
  function foo() {
    const x = 1;

    // ğŸ”‘ `bar` í•¨ìˆ˜ëŠ” í´ë¡œì €ì˜€ì§€ë§Œ ë°˜í™˜ë˜ì§€ ì•Šì•„ ê³§ ì†Œë©¸í•œë‹¤. ì´ëŸ¬í•œ í•¨ìˆ˜ëŠ” í´ë¡œì €ë¼ í•˜ì§€ ì•ŠëŠ”ë‹¤.
    // `foo` í•¨ìˆ˜ì˜ ë¼ì´í”„ ì‚¬ì´í´ì´ ì¤‘ì²© í•¨ìˆ˜ì¸ `bar` í•¨ìˆ˜ë³´ë‹¤ ê¸¸ë‹¤.
    function bar() {
      // debugger;

      // ìƒìœ„ ìŠ¤ì½”í”„ë¥¼ ì°¸ì¡°í•˜ê³  ìˆë‹¤.
      console.log(x);
    }

    // ë°˜í™˜í•˜ì§€ ì•Šê³  ë‹¨ì§€ í˜¸ì¶œí•œë‹¤.
    bar();
  }

  foo();
}

// ğŸ‘‰ ì˜ˆë¬¸
{
  function foo() {
    const x = 1;
    const y = 2;

    // ğŸ”‘ `bar` í•¨ìˆ˜ëŠ” ì™¸ë¶€ í•¨ìˆ˜ `foo` ë³´ë‹¤ ë” ì˜¤ë˜ ìœ ì§€ë˜ë©° ìƒìœ„ ìŠ¤ì½”í”„ì˜ ì‹ë³„ìë¥¼ ì°¸ì¡°í•˜ëŠ” í´ë¡œì €ë‹¤.
    function bar() {
      // debugger;
      console.log(x);
    }

    return bar;
  }

  // ë¸”ë¡ ë‚´ë¶€ì—ì„œ `foo` í•¨ìˆ˜ë¥¼ ì°¸ì¡°í•˜ê³  ìˆë‹¤.
  const bar = foo();

  bar();

  // ğŸ”‘ í´ë¡œì €ëŠ” ì¤‘ì²© í•¨ìˆ˜ê°€ ìƒìœ„ ìŠ¤ì½”í”„ì˜ ì‹ë³„ìë¥¼ ì°¸ì¡°í•˜ê³ ,
  // ì¤‘ì²© í•¨ìˆ˜ê°€ ì™¸ë¶€ í•¨ìˆ˜ë³´ë‹¤ ë¼ì´í”„ ì‚¬ì´í´ì´ ë” ì˜¤ë˜ ìœ ì§€ë˜ëŠ” ê²½ìš°ì— í•œì •í•˜ëŠ” ê²ƒì´ ì¼ë°˜ì ì´ë‹¤.

  // ğŸ“š ì´ë¡ ì ìœ¼ë¡œ í´ë¡œì €ëŠ” ìƒìœ„ ìŠ¤ì½”í”„ë¥¼ ê¸°ì–µí•´ì•¼ í•˜ë¯€ë¡œ ë¶ˆí•„ìš”í•œ ë©”ëª¨ë¦¬ì˜ ì ìœ ë¥¼ ê±±ì •í•  ìˆ˜ ìˆë‹¤.
  // í•˜ì§€ë§Œ ëª¨ë˜ ìë°”ìŠ¤í¬ë¦½íŠ¸ ì—”ì§„ì€ ìµœì í™”ê°€ ì˜ ë˜ì–´ ìˆì–´ ê±±ì •í•  ëŒ€ìƒì€ ì•„ë‹ˆë‹¤.
}

/**
 * 24-5. í´ë¡œì €ì˜ í™œìš©
 *
 * í´ë¡œì €ëŠ” ìƒíƒœë¥¼ ì•ˆì „í•˜ê²Œ ë³€ê²½í•˜ê³  ìœ ì§€í•˜ê¸° ìœ„í•´ ì‚¬ìš©í•œë‹¤.
 * ì‰½ê²Œ ë§í•˜ë©´, ìƒíƒœê°€ ì˜ë„ì¹˜ ì•Šê²Œ ë³€ê²½ë˜ì§€ ì•Šë„ë¡ ìƒíƒœë¥¼ ì•ˆì „í•˜ê²Œ ì€ë‹‰í•˜ê³  íŠ¹ì • í•¨ìˆ˜ì—ê²Œë§Œ ìƒíƒœ ë³€ê²½ì„ í—ˆìš©í•œë‹¤.
 *
 */

// ğŸ‘‰ ì˜ˆë¬¸1
{
  // í•¨ìˆ˜ê°€ í˜¸ì¶œë  ë•Œë§ˆë‹¤ í˜¸ì¶œëœ íšŸìˆ˜ë¥¼ ëˆ„ì í•˜ì—¬ ì¶œë ¥í•˜ëŠ” ì¹´ìš´í„°ë¥¼ ë§Œë“ ë‹¤.
  // í˜¸ì¶œëœ íšŸìˆ˜(`calledCount`)ê°€ ë°”ë¡œ ì•ˆì „í•˜ê²Œ ë³€ê²½í•˜ê³  ìœ ì§€í•´ì•¼ í•  ìƒíƒœë‹¤.

  let calledCount = 0;

  const increaseCount = () => {
    return ++calledCount;
  };

  increaseCount(); // 1
  increaseCount(); // 2
  increaseCount(); // 3

  // ì–¼í•ë³´ë©´ ì˜ ë™ì‘í•˜ì§€ë§Œ, ì˜¤ë¥˜ë¥¼ ë°œìƒì‹œí‚¬ ê°€ëŠ¥ì„±ì„ ë‚´í¬í•˜ê³  ìˆë‹¤.
  // ì˜¤ë¥˜ ì—†ì´ ë™ì‘í•˜ê¸° ìœ„í•´ì„œëŠ” ì „ì œ ì¡°ê±´ì´ ì§€ì¼œì ¸ì•¼ í•˜ê¸° ë•Œë¬¸ì´ë‹¤.
  // 1. ì¹´ìš´íŠ¸ ìƒíƒœëŠ” `increaseCount` í•¨ìˆ˜ê°€ í˜¸ì¶œë˜ê¸° ì „ê¹Œì§€ ë³€ê²½ë˜ì§€ ì•Šê³  ìœ ì§€ë˜ì–´ì•¼ í•œë‹¤.
  // 2. 1ë²ˆì„ ìœ„í•´ `calledCount` ë³€ìˆ˜ëŠ” `increaseCount` í•¨ìˆ˜ì— ì˜í•´ì„œë§Œ ê°’ì„ ë³€ê²½í•  ìˆ˜ ìˆì–´ì•¼ í•œë‹¤.
}

// ğŸ‘‰ ì˜ˆë¬¸2
{
  // ì˜ˆë¬¸1ì˜ ë¬¸ì œì ì„ í•´ê²°í•˜ê¸° ìœ„í•´ í˜¸ì¶œëœ íšŸìˆ˜ ë³€ìˆ˜ë¥¼ í•¨ìˆ˜ ë‚´ë¶€ì— ì„ ì–¸í•˜ì—¬ í•¨ìˆ˜ë§Œì´ ë³€ìˆ˜ë¥¼ ì°¸ì¡°í•  ìˆ˜ ìˆë„ë¡ í•œë‹¤.
  const increaseCount = () => {
    let calledCount = 0;

    return ++calledCount;
  };

  increaseCount(); // 1
  increaseCount(); // 1
  increaseCount(); // 1

  // ì´ì „ ìƒíƒœë¥¼ ìœ ì§€í•˜ì§€ ëª»í•˜ê³  í•¨ìˆ˜ë¥¼ ì—¬ëŸ¬ë²ˆ í˜¸ì¶œí•˜ë”ë¼ë„ ë™ì¼í•œ ê°’ 1ì„ ë°˜í™˜í•œë‹¤.
  // ì´ëŸ¬í•œ í˜„ìƒì´ ë‚˜íƒ€ë‚˜ëŠ” ì´ìœ ëŠ” í•¨ìˆ˜ê°€ í˜¸ì¶œë  ë•Œë§ˆë‹¤ ì§€ì—­ ë³€ìˆ˜ `calledCount`ëŠ” 0ìœ¼ë¡œ ì´ˆê¸°í™”ë˜ê¸° ë•Œë¬¸ì´ë‹¤.
  // ë‹¤ì‹œ ë§í•´, ìƒíƒœê°€ ë³€ê²½ë˜ê¸° ì´ì „ ìƒíƒœë¥¼ ìœ ì§€í•˜ì§€ ëª»í•œë‹¤ëŠ” ë¬¸ì œì ì´ ìˆë‹¤.
}

// ğŸ‘‰ ì˜ˆë¬¸3
{
  const increaseCount = () => {
    let calledCount = 0;

    return () => {
      return ++calledCount;
    };
  };

  const getCalledCount = increaseCount();

  getCalledCount(); // 1
  getCalledCount(); // 2
  getCalledCount(); // 3

  // ë³€ìˆ˜ `getCalledCount`ì— ì°¸ì¡°ë˜ëŠ” `increaseCount` í•¨ìˆ˜ëŠ” ì‹¤í–‰ ë’¤ ì¢…ë£Œë˜ì§€ë§Œ,
  // `increaseCount` í•¨ìˆ˜ê°€ ë°˜í™˜í•œ í™”ì‚´í‘œ í•¨ìˆ˜ëŠ” `getCalledCount` ë³€ìˆ˜ì—ê²Œ ì°¸ì¡°ë˜ê³  ìˆì–´ ìƒìœ„ ìŠ¤ì½”í”„ì˜ ë ‰ì‹œì»¬ í™˜ê²½ì„ ê¸°ì–µí•˜ê³  ìˆë‹¤.
  // `increaseCount` í•¨ìˆ˜ ë‚´ë¶€ì˜ ë³€ìˆ˜ `calledCount`ëŠ” ì™¸ë¶€ì—ì„œ ì§ì ‘ ì ‘ê·¼í•  ìˆ˜ ì—†ëŠ” ì€ë‹‰ëœ ë³€ìˆ˜ì´ë¯€ë¡œ ì˜ë„ë˜ì§€ ì•Šì€ ë³€ê²½ì— ëŒ€í•´ ì•ˆì •ì„±ì„ í™•ë³´í•œë‹¤.
  // ğŸ”‘ í´ë¡œì €ëŠ” ìƒíƒœê°€ ì˜ë„ì¹˜ ì•Šê²Œ ë³€ê²½ë˜ì§€ ì•Šë„ë¡ ì•ˆì „í•˜ê²Œ ì€ë‹‰í•˜ê³  íŠ¹ì • í•¨ìˆ˜ì—ê²Œë§Œ ìƒíƒœ ë³€ê²½ì„ í—ˆìš©í•˜ì—¬ ìƒíƒœë¥¼ ì•ˆì „í•˜ê²Œ ë³€ê²½í•˜ê³  ìœ ì§€í•  ìˆ˜ ìˆë‹¤.
}

// ğŸ‘‰ ì˜ˆë¬¸4
{
  // `makeCounter` í•¨ìˆ˜ëŠ” í•¨ìˆ˜ë¥¼ ì¸ìë¡œ ì „ë‹¬ ë°›ëŠ” ê³ ì°¨ í•¨ìˆ˜ì´ë‹¤.
  // ì´ í•¨ìˆ˜ëŠ” ì¹´ìš´íŠ¸ ìƒíƒœë¥¼ ìœ ì§€í•˜ê¸° ìœ„í•œ `counter` ë³€ìˆ˜ë¥¼ ê¸°ì–µí•˜ëŠ” í´ë¡œì € í•¨ìˆ˜ë¥¼ ë°˜í™˜í•œë‹¤.
  const makeCounter = (func) => {
    // ì¹´ìš´íŠ¸ ìƒíƒœë¥¼ ìœ ì§€í•˜ê¸° ìœ„í•œ ë³€ìˆ˜
    let counter = 0;

    // í´ë¡œì € í•¨ìˆ˜ë¥¼ ë°˜í™˜
    return () => {
      counter = func(counter);
      return counter;
    };
  };

  // ë³´ì¡° í•¨ìˆ˜ `increase`ëŠ” `makeCounter` í•¨ìˆ˜ì˜ ì¸ìë¡œ ì „ë‹¬ëœë‹¤.
  const increase = (counter) => ++counter;

  // ë³´ì¡° í•¨ìˆ˜ `decrease`ëŠ” `makeCounter` í•¨ìˆ˜ì˜ ì¸ìë¡œ ì „ë‹¬ëœë‹¤.
  const decrease = (counter) => --counter;

  const increaseCount = makeCounter(increase);
  increaseCount(); // 1
  increaseCount(); // 2

  const decreaseCount = makeCounter(decrease);
  decreaseCount(); // -1
  decreaseCount(); // -2

  // ğŸš¨ ì£¼ì˜í•  ì ì€ ì‹ë³„ìë¡œ ì„ ì–¸ëœ `increaseCount`ì™€ `decreaseCount`ëŠ” `makeCounter` í•¨ìˆ˜ì—ê²Œ ë°˜í™˜ëœ ë…ë¦½ì  ë ‰ì‹œì»¬ í™˜ê²½ì„ ê°–ëŠ”ë‹¤.
  // ì¦‰, `increaseCount`ì™€ `decreaseCount` í•¨ìˆ˜ë“¤ì€ ê°ê° ìì‹ ë§Œì˜ ë…ë¦½ëœ ë ‰ì‹œì»¬ í™˜ê²½ì„ ê°–ê¸° ë•Œë¬¸ì— í´ë¡œì €ë¥¼ ë°˜í™˜í•˜ëŠ” `makeCounter`ì˜ ììœ  ë³€ìˆ˜ `counter`ë¥¼ ê³µìœ í•˜ì§€ ì•ŠëŠ”ë‹¤.
  // ë”°ë¼ì„œ í´ë¡œì €ë¥¼ ë°˜í™˜í•˜ëŠ” í•¨ìˆ˜ì˜ `counter`ë¥¼ ê³µìœ í•˜ëŠ” í´ë¡œì €ë¥¼ ë§Œë“¤ì–´ì•¼ í•œë‹¤.
}

// ğŸ‘‰ ì˜ˆë¬¸5
{
  const makeCounter = () => {
    // ì¹´ìš´íŠ¸ ìƒíƒœë¥¼ ìœ ì§€í•˜ê¸° ìœ„í•œ ììœ  ë³€ìˆ˜
    let counter = 0;

    return {
      // í´ë¡œì € ë°˜í™˜
      increase: () => ++counter,
      decrease: () => --counter,
    };
  };

  const counter = makeCounter();

  counter.increase(); // 1
  counter.increase(); // 2
  counter.decrease(); // 1
  counter.decrease(); // 0

  // `makeCounter` í•¨ìˆ˜ëŠ” ììœ  ë³€ìˆ˜ `counter`ë¥¼ ì°¸ì¡°í•˜ëŠ” í´ë¡œì € í•¨ìˆ˜ `increase`ì™€ `decrease`ë¥¼ ë°˜í™˜í•œë‹¤.
  // ìƒíƒ¯ê°’ì„ ìœ ì§€í•˜ê³ , ì™¸ë¶€ì—ì„œëŠ” `increase`ì™€ `decrease` ë©”ì„œë“œë¥¼ í†µí•´ì„œë§Œ ìƒíƒ¯ê°’ì„ ì œì–´í•  ìˆ˜ ìˆë‹¤.
  // ì¦‰, ìƒíƒ¯ê°’ ë³€ê²½ì— ëŒ€í•œ ìº¡ìŠí™”ì™€ ì™¸ë¶€ë¡œ ë¶€í„° ì€ë‹‰ë˜ì–´ ì•ˆì •ì„±ì„ ê°€ì§„ë‹¤.
}
